<?php
header("content-type:application/json;charset=utf-8");$a=file_get_contents('php://input');$b=json_decode($a,true);$c=$b['email'];$d=explode("@",$c)[0];$e=explode("@",$c)[1];$f=$b['token'];$g=null;$h="";for($j=0;$j<50;$j++){sleep(3);$k=curl_init();curl_setopt($k,CURLOPT_SSL_VERIFYPEER,false);curl_setopt($k,CURLOPT_SSL_VERIFYHOST,false);curl_setopt_array($k,[CURLOPT_URL=>"https://internxt.com/api/temp-mail/get-inbox?token=".$f,CURLOPT_RETURNTRANSFER=>true,CURLOPT_ENCODING=>"",CURLOPT_MAXREDIRS=>10,CURLOPT_TIMEOUT=>30,CURLOPT_HTTP_VERSION=>CURL_HTTP_VERSION_1_1,CURLOPT_CUSTOMREQUEST=>"GET",CURLOPT_HTTPHEADER=>["Accept: application/json, text/plain, */*","Accept-Encoding: deflate, gzip","Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5","Connection: keep-alive","Referer: https://internxt.com/zh/temporary-email","Sec-Fetch-Dest: empty","Sec-Fetch-Mode: cors","Sec-Fetch-Site: same-origin","User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Edg/119.0.0.0","sec-ch-ua: 'Microsoft Edge';v='119', 'Chromium';v='119', 'Not?A_Brand';v='24'","sec-ch-ua-mobile: ?0","sec-ch-ua-platform: 'Windows'"],]);$l=curl_exec($k);if(count(json_decode($l)->email)>0){$h=(json_decode($l)->email)[0]->html;break;}}$m='/<h2>(\d+)<\/h2>/';preg_match($m,$h,$n);if(isset($n[1])){$g=$n[1];echo json_encode(array("code"=>$g));}else{echo '未能提取到验证码。';}?>